# Implementation Plan: Selective Course Deletion

## 1. Context & Goal
The user wants granular control over their data, specifically the ability to delete individual courses (Openings) instead of wiping the entire database.
We will update the Dashboard Settings to list all stored courses with individual "Delete" buttons, and implement the corresponding logic in the background script to remove lines and cancel pending enrichment tasks for that specific course.

## 2. Memory Update
Adding `DELETE_COURSE` message and handler. Updating Dashboard Data Management section to list courses for selective deletion. Updating Background script to filter `extracted_lines` and `enrichmentQueue` by course name.

## 3. Step-by-Step Instructions

### Step 1: Update Types
**Action:** Modify `src/types.ts`
**Description:**
- Add `DELETE_COURSE` to `MessageType`.
- Add interface `DeleteCoursePayload { courseName: string; }`.

### Step 2: Implement Background Deletion Logic
**Action:** Modify `src/background/index.ts`
**Description:**
- **Add Listener Case:** Handle `DELETE_COURSE`.
- **Implement `handleDeleteCourse(payload)`:**
    1.  **Filter Storage:** Get `extracted_lines`, filter out items where `line.opening === payload.courseName`. Save back to storage.
    2.  **Filter Queue:** Filter `enrichmentQueue` to remove items where `item.courseName === payload.courseName`.
    3.  **Update State:** Update `lineCount` and `queueLength` in the status state.
    4.  **Response:** Return success status.

### Step 3: Update Dashboard Settings UI
**Action:** Modify `src/dashboard/App.tsx`
**Description:**
- **In `Data Management` section:**
    - iterate through the `courses` state (which contains unique course names).
    - Render a list item for each course with a "Delete" button.
- **Implement `handleDeleteCourse(courseName)`:**
    - `window.confirm( ... )`.
    - Send `DELETE_COURSE` message.
    - On success: `await loadData()` to refresh the view immediately.
- **Style:** Use a danger color for the delete button (red/orange) but keep it smaller than the "Clear All" button.

## 4. Verification
1.  Run `npm run build`.
2.  Reload Extension.
3.  **Setup:** Scan two different courses (if you haven't already).
4.  **Test:**
    - Open Dashboard -> Settings.
    - Find "Course A" in the list. Click Delete. Confirm.
    - **Observe:** Course A lines disappear from the table. Course B lines remain.
    - **Observe:** Queue length in popup/header updates if items were pending.
